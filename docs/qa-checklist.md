# QA Checklist

## Integration API

1. `POST /api/rooms/create` создает комнату и возвращает `roomCode`.
2. `POST /api/rooms/join` вторым игроком возвращает `seat=2`.
3. Третий игрок получает `ROOM_FULL`.
4. `POST /api/rooms/:code/settings` меняет режим таймера только у хоста.
5. `POST /api/rooms/:code/chat` публикует сообщение и добавляет `room_event`.
6. Оба игрока задают секреты -> игра `active`.
7. При таймере 30/45/60 и просрочке хода происходит `turn_timeout` и переключение хода.
8. `POST /api/games/:gameId/guess` не в очередь -> `NOT_YOUR_TURN`.
9. `POST /api/games/:gameId/rematch-vote` стартует реванш только при 2 голосах.
10. `GET /api/watch/:code/state?key=...` работает только с валидным spectator key.

## E2E UX

1. Два игрока заходят в одну комнату, видят друг друга онлайн.
2. Шаринг: копирование кода, ссылки комнаты, spectator-ссылки.
3. Таймер: визуальный отсчет, уведомление при `<=10s`.
4. Чат синхронизируется у обоих игроков.
5. История ходов разделена на “ваши” и “соперника”.
6. Реванш стартует в той же комнате.
7. Spectator открывает read-only страницу и видит историю/чат.

## Accessibility

1. `skip-link` переводит фокус к основному контенту.
2. Инпуты и кнопки доступны с клавиатуры.
3. ARIA-label присутствуют у ключевых форм.
4. Высокая контрастность переключается и сохраняется.

## Security

1. В `state` нет секрета соперника.
2. Прямой доступ клиента к `game_secrets` запрещен RLS.
3. Spectator не может выполнить player-only действия (`guess`, `secret`, `chat`, `settings`).
