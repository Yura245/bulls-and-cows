# QA Checklist (MVP)

## Integration API scenarios

1. `POST /api/rooms/create` возвращает `roomCode`, `roomId`, `seat=1`.
2. `POST /api/rooms/join` вторым игроком возвращает `seat=2`.
3. Третий игрок получает `ROOM_FULL`.
4. Оба игрока отправляют `secret`, игра переходит в `active`.
5. Игрок не в очереди получает `NOT_YOUR_TURN` на `guess`.
6. При `4 bulls` игра завершается, фиксируется `winnerSeat`.
7. Один голос реванша не стартует раунд, два голоса стартуют.

## E2E scenarios

1. Открыть две вкладки/браузера и зайти в одну комнату.
2. Проверить realtime-обновление истории ходов в обеих вкладках.
3. Перезагрузить одну вкладку и убедиться, что игрок остаётся в комнате.
4. Завершить матч и запустить реванш в той же комнате.

## Security scenarios

1. Проверить, что `GET /api/rooms/:code/state` не содержит секрет соперника.
2. Проверить, что прямой запрос к `game_secrets` от `authenticated` пользователя запрещён RLS.
3. Отправить два одинаковых `guess` подряд и убедиться, что игра не ломается.
